---
maxResults: 10
layout: layout.njk
pagination:
  data: "sites"
  size: 1
  alias: vertical
permalink: "/{{ (sites[vertical].name or vertical) | slug }}/"
counts:
  performance: 0
  accessibility: 0
  bestPractices: 0
  seo: 0
  perfect: 0
  total: 0
---
<div class="leaderboard-wrapper ">
	<table class="leaderboard">
		<div class="flex items-center justify-between w-full">
                {%- if not sites[vertical].unordered %}
				<div class="text-gray-900 font-medium">Rank</div>
				<div class=" text-gray-900 font-medium">Trophy</div>
                {%- endif %}
				<div class="text-gray-900 font-medium">URL</div>
				<div class=" text-gray-900 font-medium">Built With</div>
				<div class=" text-gray-900 font-medium">Host</div>
				<div class="leaderboard-score text-gray-900 font-medium">Lighthouse</div>
				<div class=" text-gray-900 font-medium">Page weight</div>
				<div class="text-right text-gray-900 font-medium"><span data-sr-only>Data and Graphs</span></div>

		</div>
		<div class="leaderboard">
    {%- set showRank = true %}
    {%- for site in results | getSites(sites, vertical, isolatedKeys) | sortCumulativeScore %}
        {%- set newestKey = site | getObjectKey(":newest") %}
        {%- set key = site | getObjectKey %}
        {%- set hundos = 0 %}

        {%- if not site[newestKey].error %}
            {%- set hundos = site[newestKey] | hundoCount %}
            {%- set notGreenCircleCount = site[newestKey] | notGreenCircleCount %}
            {%- if notGreenCircleCount >= 3 and sites[vertical].options and sites[vertical].options.noShame %}{% set showRank = false %}{% endif %}
        {% endif %}
        <div class="leaderboard-list-entry{% if not sites[vertical].unordered and site[newestKey].ranks and loop.index != site[newestKey].ranks.cumulative %} leaderboard-list-entry-badrank{% endif %}" id="site-{{ site[key].url | shortHash }}">
            {%- if not sites[vertical].unordered %}
            <div class="leaderboard-number">
                {%- if showRank %}<a href="#site-{{ site[key].url | shortHash }}" class="leaderboard-directlink"><span>#</span>{{ loop.index }}</a>{% endif -%}
            </div>
            <div class="text-gray-900 font-medium leaderboard-trophies">
                {%- if hundos === 4 %}üèÜ{% endif %}
                {%- if loop.index0 === 0 %}ü•á{% elseif loop.index0 === 1 %}ü•à{% elseif loop.index0 === 2 %}ü•â{% endif %}
            </div>
            {%- endif %}
            {%- set hasRedirect = site[newestKey].requestedUrl and site[newestKey].url != site[newestKey].requestedUrl %}
            <div class="leaderboard-url">
                <a class="flex flex-col" href="{{ site[newestKey].url }}">
                    <img src="https://v1.indieweb-avatar.11ty.dev/{{ site[newestKey].url | urlencode }}/" class="size-10" alt="IndieWeb Avatar for {{ site[newestKey].url | displayUrl }}" class="leaderboard-list-entry-thumbnail" loading="lazy" decoding="async">
                    <code class="text-xs text-gray-500">{{ site[newestKey].url | displayUrl(hasRedirect) }}</code>
                </a>
                {%- if hasRedirect %}<span class="leaderboard-redirect-warn">Redirect from <code class="url">{{ site[newestKey].requestedUrl | displayUrl(true) }}</code></span>{% endif -%}
                {%- if site[newestKey].error %}<span class="leaderboard-redirect-error">Error</span>{% endif -%}
            </div>
            <div class="text-gray-900 font-medium">
                <img src="{{ site[newestKey].url | generatorImageUrl }}" width="60" height="60" alt="Generator for {{ site[newestKey].url | displayUrl }}" class="leaderboard-list-entry-thumbnail small" loading="lazy" decoding="async">
            </div>
            <div class="text-gray-900 font-medium">
                <img src="{{ site[newestKey].url | hostingImageUrl }}" width="60" height="60" alt="Hosting avatar for {{ site[newestKey].url | displayUrl }}" class="leaderboard-list-entry-thumbnail small" loading="lazy" decoding="async">
            </div>
            {%- if site[newestKey].error %}
            <div class="empty-columns"></div>
            {%- else %}
            {%- set counts = counts | hundoCountTotals(site[newestKey]) %}
            <div class="leaderboard-score">{% if showRank %}<is-land on:visible><speedlify-score class="leaderboard-score-circles{% if hundos === 4 %} leaderboard-score-circles-400{% endif %}" raw-data='{{ site[newestKey] | toJSON | safe }}'></speedlify-score></is-land><span class="leaderboard-score-sum leaderboard-number">{% if hundos === 4 %}üòç{% else %}{{ site[newestKey] | lighthouseTotal }}{% endif %}</span>{% endif %}{% lighthouseSparkline site %}</div>
            <div class="">{% weightSparkline site %}</div>
            <div class="leaderboard-data-right"><a href="#details-{{ site[key].url | shortHash }}" data-expand-alias data-js-only><span class="leaderboard-expand-icon"></span> Data<span class="text-gray-900 font-medium"> and Graphs</span></a></div>
            {%- endif %}
        </div>

        {%- if not site[newestKey].error %}
        <div class="leaderboard-list-entry-details">
            <details class="leaderboard-details" id="details-{{ site[key].url | shortHash }}">
                <summary>Show Data</summary>
                <div class="layout color--lighthouse">
                    <div class="tablewrap">
                        <div class="results-header">
                            <div>Date</div>
                            {%- if not sites[vertical].unordered %}
                            <div>Rank</div>
                            {%- endif %}
                            <div>Perf</div>
                            <div>A11Y</div>
                            <div>Best Practices</div>
                            <div>SEO</div>
                        </div>
                        <div class="results-body">
                            {%- for entry in site | sort | headAndLast(maxResults) %}
                            <div class="result-row">
                                <div><code class="date">{{ entry.timestamp | displayDate | safe }}</code></div>
                                {%- if not sites[vertical].unordered %}
                                <div class="results-bool">{% if entry.ranks.cumulative %}#{{ entry.ranks.cumulative }}{% endif %}</div>
                                {%- endif %}
                                <div class="results-bool">{{ (entry.lighthouse.performance * 100) | round }}</div>
                                <div class="results-bool">{{ (entry.lighthouse.accessibility * 100) | round }}</div>
                                <div class="results-bool">{{ (entry.lighthouse.bestPractices * 100) | round }}</div>
                                <div class="results-bool">{{ (entry.lighthouse.seo * 100) | round }}</div>
                            </div>
                            {%- endfor %}
                        </div>
                    </div>
                </div>
            </details>
        </div>
        {%- endif %}
    {%- endfor %}
</div>

								</table>
							</div>
							<div data-js-only class="ct-chart ct-double-octave"></div>
						</div>

						<div class="layout color--vitals">
							<div class="tablewrap">
								<table data-make-chart class="results">
									<thead>
										<tr>
											<th rowspan="2" class="results-date">Date</th>
											<th colspan="8">Core Web Vitals</th>
											<th colspan="6">Web Vitals</th>
										</tr>
										<tr>
											<th class="results-series-a" colspan="2"><abbr title="Largest Contentful Paint">LCP</abbr></th>
											<th class="results-series-b" colspan="2">Max <span class="">Potential </span><abbr title="First Input Delay">FID</abbr></th>
											<th class="results-series-c" colspan="2"><abbr title="Total Blocking Time">TBT</abbr></th>
											<th colspan="2"><abbr title="Cumulative Layout Shift">CLS</abbr></th>

											<th class="results-series-d" colspan="2"><abbr title="First Contentful Paint">FCP</abbr></th>
											<th class="results-series-e" colspan="2"><abbr title="Speed Index">SI</abbr></th>
											<th class="results-series-f" colspan="2"><abbr title="Time to Interactive">TTI</abbr></th>
										</tr>
									</thead>
									<tbody>
									{%- for entry in site | sort | headAndLast(maxResults) %}
										<tr>
											<td><code class="date">{{ entry.timestamp | displayDate | safe }}</code></td>
											<td class="results-bool">{%
												if entry.largestContentfulPaint > lighthouseMaximums.average.lcp
													%}<span class="">üö´</span>{%
												elseif entry.largestContentfulPaint > lighthouseMaximums.good.lcp
													%}<span class="">‚ö†Ô∏è</span>{%
												endif
											%}</td>
											<td data-numeric-value="{{ entry.largestContentfulPaint }}">{{ entry.largestContentfulPaint | displayTime }}</td>
											{# https://web.dev/lighthouse-max-potential-fid/#how-lighthouse-determines-your-max-potential-fid-score #}
											<td class="results-bool"></td>
											<td data-numeric-value="{{ entry.maxPotentialFirstInputDelay }}">{{ entry.maxPotentialFirstInputDelay | displayTime }}</td>
											<td class="results-bool">{%
											if entry.totalBlockingTime > lighthouseMaximums.average.tbt
												%}<span class="">üö´</span>{%
											elseif entry.totalBlockingTime > lighthouseMaximums.good.tbt
												%}<span class="">‚ö†Ô∏è</span>{%
											endif
											%}</td>
											<td data-numeric-value="{{ entry.totalBlockingTime }}">{{ entry.totalBlockingTime | displayTime }}</td>
											<td class="results-bool">{%
											if entry.cumulativeLayoutShift > lighthouseMaximums.average.cls
												%}<span class="">üö´</span>{%
											elseif entry.cumulativeLayoutShift > lighthouseMaximums.good.cls
												%}<span class="">‚ö†Ô∏è</span>{%
											endif
											%}</td>
											<td>{{ entry.cumulativeLayoutShift | showDigits(2) }}</td>
											<td class="results-bool">{%
											if entry.firstContentfulPaint > lighthouseMaximums.average.fcp
												%}<span class="">üö´</span>{%
											elseif entry.firstContentfulPaint > lighthouseMaximums.good.fcp
												%}<span class="">‚ö†Ô∏è</span>{%
											endif
											%}</td>
											<td data-numeric-value="{{ entry.firstContentfulPaint }}">{{ entry.firstContentfulPaint | displayTime }}</td>
											<td class="results-bool">{%
											if entry.speedIndex > lighthouseMaximums.average.si
												%}<span class="">üö´</span>{%
											elseif entry.speedIndex > lighthouseMaximums.good.si
												%}<span class="">‚ö†Ô∏è</span>{%
											endif
											%}</td>
											<td data-numeric-value="{{ entry.speedIndex }}">{{ entry.speedIndex | displayTime }}</td>
											<td class="results-bool">{%
											if entry.timeToInteractive > lighthouseMaximums.average.tti
												%}<span class="">üö´</span>{%
											elseif entry.timeToInteractive > lighthouseMaximums.good.tti
												%}<span class="">‚ö†Ô∏è</span>{%
											endif
											%}</td>
											<td data-numeric-value="{{ entry.timeToInteractive }}">{{ entry.timeToInteractive | displayTime }}</td>
										</tr>
									{%- endfor %}
									</tbody>
								</table>
							</div>
							<div data-js-only class="ct-chart ct-double-octave"></div>
						</div>

						<div class="layout color--weight">
							<div class="tablewrap">
								<table data-make-chart class="results">
									<thead>
										<tr>
											<th rowspan="2" class="results-date">Date</th>
											<th colspan="7">Weight</th>
										</tr>
										<tr>
											<th class="results-series-a">Total</th>
											<th class="results-series-b">HTML</th>
											<th class="results-series-c"><abbr title="Cascading Style Sheets">CSS</abbr></th>
											<th class="results-series-d"><abbr title="JavaScript">JS</abbr></th>
											<th class="results-series-e">Images</th>
											<th class="results-series-f">Fonts</th>
											<th>Third Party</th>
										</tr>
									</thead>
									<tbody>
									{%- for entry in site | sort | headAndLast(maxResults) %}
										<tr>
											<td><code class="date">{{ entry.timestamp | displayDate | safe }}</code></td>
											<td data-numeric-value="{{ entry.weight.total / 1024 }}">{{ entry.weight.total | displayFilesize | safe }}</td>
											<td data-numeric-value="{{ entry.weight.document / 1024 }}">{{ entry.weight.document | displayFilesize | safe }}</td>
											<td data-numeric-value="{{ entry.weight.stylesheet / 1024 }}">{% if entry.weight.stylesheet or entry.weight.stylesheet === 0 %}{{ entry.weight.stylesheet | displayFilesize | safe }} <span class="count ">√ó{{ entry.weight.stylesheetCount }}</span>{% else %}‚ùì{% endif %}</td>
											<td data-numeric-value="{{ entry.weight.script / 1024 }}">{{ entry.weight.script | displayFilesize | safe }} <span class="count ">√ó{{ entry.weight.scriptCount }}</span></td>
											<td data-numeric-value="{{ entry.weight.image / 1024 }}">{{ entry.weight.image | displayFilesize | safe }} <span class="count ">√ó{{ entry.weight.imageCount }}</span></td>
											<td data-numeric-value="{{ entry.weight.font / 1024 }}">{{ entry.weight.font | displayFilesize | safe }} <span class="count ">√ó{{ entry.weight.fontCount }}</span></td>
											<td data-numeric-value="{{ entry.weight.thirdParty / 1024 }}">{{ entry.weight.thirdParty | displayFilesize | safe }} <span class="count ">√ó{{ entry.weight.thirdPartyCount }}</span></td>
										</tr>
									{%- endfor %}
									</tbody>
								</table>
							</div>
							<div data-js-only class="ct-chart ct-double-octave"></div>
						</div>
					</details>
				</td>
			</tr>
			{%- endif %}
		{%- endfor %}
		</tbody>
	</table><!-- /leaderboard -->
	<dl class="flex flex-col divide-y divide-gray-200 border-y">
		<div class="flex items-center justify-between py-4">
			<dt class="text-gray-900">Performance </dt>
			<dd class="text-gray-500">{{ counts.performance }}<span> / {{ counts.total }}</span></dd>
		</div>
		<div class="flex items-center justify-between py-4">
			<dt class="text-gray-900">Accessibility </dt>
			<dd class="text-gray-500">{{ counts.accessibility }}<span> / {{ counts.total }}</span></dd>
		</div>
		<div class="flex items-center justify-between py-4">
			<dt class="text-gray-900">Best Practices </dt>
			<dd class="text-gray-500">{{ counts.bestPractices }}<span> / {{ counts.total }}</span></dd>
		</div>
		<div class="flex items-center justify-between py-4">
			<dt class="text-gray-900">SEO </dt>
			<dd class="text-gray-500">{{ counts.seo }}<span> / {{ counts.total }}</span></dd>
		</div>
		<div class="flex items-center justify-between py-4">
			<dt class="text-gray-900">Perfect 4√ó</dt>
			<dd class="text-gray-500">{{ counts.perfect }}<span> / {{ counts.total }}</span></dd>
		</div>
	</dl>
</div><!-- /leaderboard-wrapper -->